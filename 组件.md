# 组件

组件是自定义元素，组件封装了行为（方法）和模板（HTML 代码，用于呈现数据）的类。

## 组件定义

使用 ts 的 Component 装饰器，可定义一个组件，组件内部可用元数据进行注解，元数据定义组件如何工作、如何渲染。

```ts
@Component({
  selector:'app-stock-item',
  templateUrl:'./component.html',
  styleUrls:['./component.css']
})
// 导出组件
export class StockItemComponent implements OnInit {
// 其他代码
}
```

组件的命名：
`xxxx.component.ts`，xxxx 是组件所在的目录，一般使用中划线（羊肉串）命名方式。

### 组件的属性

装饰器中与很多属性，只有**选择器**和**模板**是必选的，其他都是可选的。当 ng 遇到选择器时，会渲染 `StockItemComponent` 组件，即渲染模板代码。

1. selector 

selector (选择器)接收一个字符串，用于提供 ng 识别组件，是在 html 中使用组件的方式，和 CSS 选择器类似。

- 元素选择器

 selector:'tag-selector'，使用：`<tag-selector></tag-selector>`
> 不能写成自闭合标签，比如 `<tag-selector/>`，ng 这么要求的原因是为了使自定义元素符合 Html5 规范。

- 类选择器

 selector:'.class-selector'，使用：`<div class="class-selector"></div>`

- 属性选择器

 selector:'[prop-selector]'，使用： `<div prop-selector></div>`，在 html 中以属性的形式使用组件。

> 最推荐的选择器是元素选择器，这样很容易识别该选择器是一个组件。


2. template 

模板是用于描述 UI 的代码，用来呈现数据。

templateUrl属性接收一个相当于组件的路径，绝对路径会报错。

还可以使用内联模板，即在 template 属性接收一串 html 代码作为模板。

使用路径引入模板，可以获更加好的编辑器支持。

3. 组件样式

和模板类似，组件的样式可使用 `styleUrls` 属性从外部引入，或者使用 `styles` 属性写内联样式，只能有一种，它们都是数组。

ng 提倡组件的样式是完全封闭和隔离的，也就说组件中使用的样式不会影响到其他组件，也可以通过设置`encapsulation`属性来改变样式的作用域。

encapsulation 有三个可选的值：
`ViewEncapsulation.Emulated` -- 默认值，组件内生效，会创建模板影子 DOM 和影子 root 行为的胶水代码。
`ViewEncapsulation.Native` -- 使用影子 root。适用于支持的浏览器和平台。
`ViewEncapsulation.None` -- 全局生效，没有任何封装。

> 有时候想要从外部修改组件的样式，如何做到？

> 什么是影子 DOM?

